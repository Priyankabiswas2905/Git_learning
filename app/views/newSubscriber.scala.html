<<<<<<< HEAD
@(myForm: Form[Subscriber], FBEnabled: Boolean)(implicit flash: play.api.mvc.Flash, request: RequestHeader, user: Option[securesocial.core.Identity])

@import helper._
@import securesocial.core.IdentityProvider
@implicitFieldConstructor = @{ FieldConstructor(twitterBootstrapInput.f) }

@main("Subscriber") {
  <div class="page-header">
    @if(user.isDefined) {
    	<h1>Add subscriber.</h1>
    }
    @if(!user.isDefined) {
    	<h1>Subscribe to our Medici 2 newsletter.</h1>
    }
  </div>
  <div class="row">
	<div class="col-md-12">
	@if(myForm.hasErrors) {
		<div class="alert alert-error">
            <p>Please fix all errors</p>
        </div>
        @if(flash.get("error").size == 0 && !myForm.error("name") && !myForm.error("surname") && !myForm.error("identifier") && !myForm.error("password")){
        	<div class="alert alert-error">
            		<p>Subscriber refused to authenticate with Facebook and grant publish feeds permission.</p>
        	</div>
        }         
    }
    @flash.get("error").map { message =>
    	<div class="alert alert-error">
            <p>@message</p>
        </div>
    }
    
	  <form action = "@routes.Subscribers.submit.absoluteURL(IdentityProvider.sslEnabled)"
                      class="form-horizontal" method="POST" enctype="multipart/form-data">	 
	    <fieldset  id="nameSurnameIdentifierFieldSet">
	      @inputText(myForm("name"), '_label -> "Name")
	      @inputText(myForm("surname"), '_label -> "Surname")
	      @if(FBEnabled){
	      	@inputText(myForm("identifier"), '_label -> "Email, Facebook username or Facebook ID")
	      	@inputPassword(myForm("password"), '_label -> "Password (for unregistering). IMPORTANT: Do not use your Facebook password!")
	      }
	      @if(!FBEnabled){
	      	@inputText(myForm("identifier"), '_label -> "Email")
	      	@inputPassword(myForm("password"), '_label -> "Password (for unregistering).")
	      }	      
	    </fieldset>
	    @if(FBEnabled){
		    <div style="margin-top:10px;margin-bottom:10px;">
		    	<b>Note: Facebook-based subscribers will need to resubscribe every two months due to Facebook app restrictions.</b>
		    	<br /><b>A notice for this will be sent to the subscriber's Facebook wall when his/her resubscription is needed.</b>
		    </div>
	    }
        <div class="form-actions">
          <input type="submit" class="btn btn-default" value="Subscribe"/>
        </div>
	  </form>
    </div>
  </div>
}
