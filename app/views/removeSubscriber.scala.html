@* Author: Constantinos Sophocleous *@
@(myForm: Form[(String,String)], FBEnabled: Boolean)(implicit flash: play.api.mvc.Flash, request: RequestHeader)

@import helper._
@import securesocial.core.IdentityProvider
@implicitFieldConstructor = @{ FieldConstructor(twitterBootstrapInput.f) }

@main("Subscriber") {
  <div class="page-header">
    <h1>Unsubscribe from the Medici 2 newsletter.</h1>
  </div>
  <div class="row">
	<div class="col-md-12">
	@if(myForm.hasErrors) {
		<div class="alert alert-error">
            <p>Please fix all errors</p>
        </div>
        @if(flash.get("error").size == 0){
        	<div class="alert alert-error">
        		@if(FBEnabled){
            		<p>Wrong email, Facebook username or Facebook ID and/or password.</p>
            	}
        		@if(!FBEnabled){
            		<p>Wrong email and/or password.</p>
            	}
        	</div>
        }        
    }
    @flash.get("error").map { message =>
    	<div class="alert alert-error">
            <p>@message</p>
        </div>
    }
    
	  <form action = "@routes.Subscribers.removeSubscription.absoluteURL(IdentityProvider.sslEnabled)"
                      class="form-horizontal" method="POST" enctype="multipart/form-data">	 
	    <fieldset  id="unsubscribeIdentifierFieldSet">
	      @if(FBEnabled){	
	      	@inputText(myForm("identifier"), '_label -> "Email, Facebook username or Facebook ID")
	      }
	      @if(!FBEnabled){	
	      	@inputText(myForm("identifier"), '_label -> "Email")
	      }
	      @inputPassword(myForm("password"), '_label -> "Password")
	    </fieldset>
        <div class="form-actions">
          <input type="submit" class="btn btn-default" value="Unsubscribe"/>
        </div>
	  </form>
    </div>
  </div>
}