@(title: String)(content: Html)(implicit user: Option[securesocial.core.Identity] = None)

@import models.AppAppearance._

<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
<title>@title</title>
<link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/main.css")">
<link rel="stylesheet" href="@routes.Assets.at("stylesheets/" + Admin.getTheme())">
<link rel="stylesheet" media="screen" href="@routes.Assets.at("javascripts/jquery-ui-1.10.3.custom.min.css")">
<link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/pdf.css")">
<link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/tableborder.css")">
<link rel="shortcut icon" type="image/png" href="@routes.Assets.at("images/favicon.png")">
<script src="@routes.Assets.at("javascripts/jquery-1.10.2.js")" type="text/javascript"></script>
<script src="@routes.Assets.at("javascripts/jquery-ui-1.10.3.custom.min.js")" type="text/javascript"></script>
<script src="@routes.Assets.at("javascripts/bootstrap.js")" type="text/javascript"></script>
<script type="text/javascript" src="@routes.Application.javascriptRoutes"></script>

<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="../../assets/js/html5shiv.js"></script>
      <script src="../../assets/js/respond.min.js"></script>
    <![endif]-->
    
</head>
<body>

  <div id="wrap">
	<div class="navbar navbar-default navbar-fixed-top">
			<div class="container">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
				      <span class="glyphicon-bar"></span>
				      <span class="glyphicon-bar"></span>
				      <span class="glyphicon-bar"></span>
				    </button>
					<a class="navbar-brand" href="@routes.Application.index">@(AppAppearance.getDefault.get.displayedName)</a>
				</div>
				<div class="navbar-collapse collapse">
					<ul class="nav navbar-nav">
						<li class="dropdown">
						   <a href="#" class="dropdown-toggle" data-toggle="dropdown">Collections<b class="caret"></b></a>
						   <ul class="dropdown-menu">
						   	<li><a href="@routes.Collections.newCollection">Create</a></li>
						   	<li><a href="@routes.Collections.list("")">List</a></li>						   	
						   </ul>
						</li>
						<li class="dropdown">
						   <a href="#" class="dropdown-toggle" data-toggle="dropdown">Datasets<b class="caret"></b></a>
						   <ul class="dropdown-menu">
						   	<li><a href="@routes.Datasets.newDataset">Create</a></li>
						   	<li><a href="@routes.Datasets.list("")">List</a></li>
						   	<li><a href="@routes.Datasets.metadataSearch">Search by user metadata</a></li>
						   	<li><a href="@routes.Datasets.generalMetadataSearch">General metadata search</a></li>						   	
						   </ul>
						</li>
						<li class="dropdown">
						   <a href="#" class="dropdown-toggle" data-toggle="dropdown">Files<b class="caret"></b></a>
						   <ul class="dropdown-menu">
						   	<li><a href="@routes.Files.uploadFile">Upload</a></li>
						   	<li><a href="@(routes.Files.list(""))">List</a></li>
						   	<li><a href="@routes.Files.metadataSearch">Search by user metadata</a></li>
						   	<li><a href="@routes.Files.generalMetadataSearch">General metadata search</a></li>
						   </ul>
						</li>
						<li class="dropdown">
						   <a href="#" class="dropdown-toggle" data-toggle="dropdown">Newsletter<b class="caret"></b></a>
						   <ul class="dropdown-menu">
						   @if(!user.isDefined) {
							   	<li><a href="@routes.Subscribers.subscribe">Subscribe</a></li>
								<li><a href="@routes.Subscribers.unsubscribe">Unsubscribe</a></li>
							}
							@if(user.isDefined) {
									<script language="javascript">	
										var hostIp = "@play.Play.application().configuration().getString("hostIp")";
									</script>
									<script src="@routes.Assets.at("javascripts/userSubscriptions.js")" type="text/javascript"></script>
									<li><a href="#" onclick="subscribeUser('@user.get.identityId.userId')">Subscribe</a></li>
									<li><a href="#" onclick="unsubscribeUser('@user.get.identityId.userId')">Unsubscribe</a></li>																
							}
							</ul>
						</li>	
						<li class="dropdown">	
						   <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tags<b class="caret"></b></a>
						   <ul class="dropdown-menu">
						   	<li><a href="@routes.Tags.tagCloud">Tag cloud</a></li>
						   </ul>
						</li>
					</ul>
					
					
					@play.api.Play.current.plugin[services.ElasticsearchPlugin] match {
						case Some(p) => {
							<div class="nav navbar-nav navbar-right col-md-3" style="vertical-align: middle;">
								<form class="navbar-form navbar-right form-horizontal" role="search" action="@routes.Search.search("")">
						        <div class="input-group">
						            <input type="text" class="form-control input-sm" placeholder="Search" name="query" id="srch-term">
						            <div class="input-group-btn">
						                <button class="btn btn-default btn-sm" type="submit"><i class="glyphicon glyphicon-search"></i></button>
						            </div>
						        </div>
						        </form>
						    </div>
						}
						case None => {}
					}
					

					<ul class="nav navbar-nav navbar-right">
					
					
					@user match {
    					case Some(x) => {
    						<li>
								<a  class="navbar-link" href="@securesocial.controllers.routes.LoginPage.logout">Logout (@x.fullName)</a>
							</li>
						}
    					case None => {
    						<li>
								<a class="navbar-link" href="@securesocial.controllers.routes.LoginPage.login">Login</a>
							</li>
						}
					}
<!-- 						<a class="" href="@routes.Admin.main">Admin</a> -->
						<li class="dropdown">
						   <a href="#" class="dropdown-toggle" data-toggle="dropdown">Admin<b class="caret"></b></a>
						   <ul class="dropdown-menu">
						   	<li><a href="@routes.Admin.main">Main</a></li>	
						   	<li><a href="@routes.Extractors.extractions">Extractors events</a></li>
						   	<li><a href="@routes.Subscribers.makeNewsFeed">Send news feed.</a></li>
						   	<li><a href="@routes.Subscribers.makeNewsFeedFB">Send Facebook news feed.</a></li>		
						   	<li><a href="@routes.Subscribers.list">List newsfeeds subscribers</a></li>
						   	<li><a href="@routes.Subscribers.addSubscriber">Add new subscriber</a></li>							   			   	
						   	<li><a href="@routes.Admin.newAdmin">Add admin</a></li>	
						   	<li><a href="@routes.Admin.listAdmins">List admins</a></li>
						   	<li><a href="@routes.Admin.viewDumpers">Dumps</a></li>					   	
						   </ul>
						</li>
					
					</ul>
					

					
					
					
				</div>
		</div>
	</div>
	<div class="container">
		@content
	</div>
	<div id="push"></div>
  </div>
  
  <div id="footer">
    <div class="container">
      <p class="muted credit">Powered by <a href="http://medici.ncsa.illinois.edu">Medici</a>.</p>
    </div>
  </div>
  

</body>
</html>
