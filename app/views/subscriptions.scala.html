@* Author: Constantinos Sophocleous *@
@(subscriptions: List[models.Subscriber])(implicit user: Option[securesocial.core.Identity])

@main("Subscribers") {
	<script language="javascript">	
		var hostIp = "@play.Play.application().configuration().getString("hostIp")";
	</script>
	<script src="@routes.Assets.at("javascripts/userSubscriptions.js")" type="text/javascript"></script>
	<script>
		function handleRemoval(email, theElement){
			var couldUnsubscribe = unsubscribeUser(email);
			$(theElement).parent().parent().remove();				
		}
	</script>
	<div class="page-header">
		<h1>Subscribers</h1>
	</div>
	@if(subscriptions.size == 0) {
	<div class="row">
		<div class="col-md-12">
			No subscribers present.
		</div>
	</div>
	}
	@if(subscriptions.size > 0) {
	<table class="table subscribersTable">
		<thead>
	       <tr>
	         <th>Name</th>
	         <th>Email/ Facebook Identifier</th>
	       </tr>
	     </thead>
	     <tbody>
	    @for(s <- subscriptions) {
	      <tr>
			<td>
				@(s.name + " " + s.surname)
			</td>
			<td>
				@s.email.getOrElse(s.FBIdentifier)
			</td>
			<td><a href="#" onclick="handleRemoval('@s.email.getOrElse(s.FBIdentifier)',this);">Remove</a></td>			
		  </tr>
		}
		</tbody>
		</table>
	}

}
